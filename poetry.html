<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Poetry Only Survives ? step it up</title>
<style>
  body { 
    margin: 0; 
    background: #0b0b0b; /* 깊은 검은색 배경 */
    overflow: hidden; 
  }
  #stage { 
    position: relative; 
    width: 100vw; 
    height: 100vh; 
  }
  .step {
    position: absolute; 
    left: 50%;
    transform: translateX(-50%);
    /* Stefans 스타일: 고정폭 폰트로 '코드'나 '데이터' 느낌 강조 */
    font: 32px/1 ui-monospace, Menlo, Consolas, "Courier New", monospace;
    color: #eaeaea; 
    white-space: pre;
    letter-spacing: .04em;
    pointer-events: none;
  }
  .hint { 
    position: fixed; 
    left: 12px; 
    bottom: 10px; 
    color: #555; 
    font: 12px monospace;
    z-index: 100;
  }
</style>
</head>
<body>

<div id="stage"></div>
<div class="hint">click = restart · space = pause</div>

<script>
const PHRASE = "POETRY ONLY SURVIVES";
const stage = document.getElementById("stage");

let running = true;
let speed = 1.0;        // 가속의 시작값
let stepGap = 22;       // 계단 간격
let y = window.innerHeight + 40;

function addStep(text){
  const d = document.createElement("div");
  d.className = "step";
  d.textContent = text;
  d.style.top = y + "px";
  stage.appendChild(d);
}

function loop(){
  if(!running) return requestAnimationFrame(loop);

  // Brian Kim Stefans 스타일의 핵심: '가속'
  // 시간이 지날수록 시가 통제 불가능하게 빨라짐
  speed *= 1.002; 

  // 일정 간격마다 새로운 계단 생성
  // speed가 빨라질수록 생성 빈도(밀도)도 높아짐
  if (Math.random() < 0.12 * speed) {
    addStep(PHRASE);
    y -= stepGap; // 생성 위치가 점점 위로 올라감 (화면을 채움)
  }

  // 모든 텍스트를 위로 이동
  const children = [...stage.children];
  for(let el of children){
    const ty = parseFloat(el.style.top);
    el.style.top = (ty - speed) + "px";
    
    // 화면 위로 벗어나면 제거 (메모리 관리)
    if (ty < -40) el.remove();
  }

  // 바닥에 도달하면 리셋 (루프)
  // 생성 위치(y)가 화면 꼭대기를 넘어가면 초기화
  if (y < -window.innerHeight) {
    y = window.innerHeight + 40;
    speed = 1.0;
    stage.innerHTML = "";
  }

  requestAnimationFrame(loop);
}

// 초기 실행
loop();

// 인터랙션
window.addEventListener("click", ()=>{
  y = window.innerHeight + 40;
  speed = 1.0;
  stage.innerHTML = "";
});

window.addEventListener("keydown", (e)=>{
  if(e.code === "Space") running = !running;
});

window.addEventListener("resize", ()=>{
  y = window.innerHeight + 40;
});
</script>
</body>
</html>